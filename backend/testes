from pathlib import Path; import os, uuid; base=Path(r'c:\\Users\\adsow\\Desktop\\TG\\TextWaves-main\\TextWaves-main\\backend\\app'); os.chdir(base);
from app import app
from database.db_config import db

app.testing=True
client=app.test_client()
with app.app_context():
    db.create_all()

unique = uuid.uuid4().hex
username = f'User_{unique[:6]}'
email = f'{unique[:6]}@example.com'
password = 'Senha123!'

response=client.post('/api/auth/register', json={'username':username,'email':email,'password':password})
print('register status:', response.status_code)
print('register json user:', response.get_json().get('user') if response.is_json else None)

response=client.post('/api/auth/login', json={'login':username.upper(),'password':password})
print('login uppercase username status:', response.status_code)
print('login uppercase username message:', response.get_json().get('message') if response.is_json else None)

response=client.post('/api/auth/login', json={'login':email.upper(),'password':password})
print('login uppercase email status:', response.status_code)
print('login uppercase email message:', response.get_json().get('message') if response.is_json else None)

response=client.post('/api/auth/login', json={'login':username,'password':'wrong'})
print('login wrong password status:', response.status_code)
print('login wrong password error:', response.get_json().get('error') if response.is_json else None)
"